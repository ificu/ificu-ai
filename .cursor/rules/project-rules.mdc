# AI 할 일 관리 웹 서비스 개발 규칙

## 1. 프로젝트 개요

이 프로젝트는 Next.js 15 App Router 기반의 AI 할 일 관리 웹 서비스입니다. 사용자 경험을 최우선으로 하며, 안정적이고 확장 가능한 코드베이스를 유지하는 것을 목표로 합니다.

## 2. 프로젝트 특징

### 2.1 사용자 경험 최우선
- **로딩 상태 UI**: 모든 비동기 작업에 대해 로딩 상태를 명확히 표시합니다.
- **빈 상태 UI**: 데이터가 없을 때 사용자에게 안내하는 빈 상태 컴포넌트를 제공합니다.
- **오류 상태 UI**: 오류 발생 시 사용자에게 친절한 안내 메시지를 표시합니다.
- **상호작용 지연 최소화**: 
  - Optimistic UI 업데이트를 적극 활용합니다.
  - 필요한 경우 Suspense와 Streaming을 활용합니다.
  - 불필요한 리렌더링을 방지합니다.

### 2.2 오류 처리 철저
- **서버 측 오류 처리**: 
  - 모든 API Route와 Server Action에서 try-catch로 예외를 포착합니다.
  - 개발 환경에서는 상세한 오류 로그를 출력합니다.
  - 프로덕션 환경에서는 민감한 정보를 제외한 안전한 오류 메시지를 반환합니다.
  
- **클라이언트 측 오류 처리**:
  - React Error Boundary를 활용합니다.
  - 모든 비동기 작업에 대해 에러 핸들링을 구현합니다.
  - 사용자에게는 한글로 친절한 오류 메시지를 제공합니다.

- **오류 메시지 규칙**:
  - 사용자에게 표시되는 모든 오류 메시지는 한글로 작성합니다.
  - 기술적인 용어는 피하고, 사용자가 이해하기 쉬운 표현을 사용합니다.
  - 개발 환경(`process.env.NODE_ENV === 'development'`)에서는 콘솔에 상세 로그를 출력합니다.

## 3. 기술 스택

### 3.1 핵심 프레임워크
- **Next.js 15**: App Router를 사용합니다.
- **TypeScript**: 필수이며, `strict` 모드를 권장합니다.
- **React 19**: 최신 React 기능을 활용합니다.

### 3.2 스타일링
- **Tailwind CSS**: 유틸리티 기반 CSS 프레임워크를 사용합니다.
- **Shadcn/ui**: UI 컴포넌트 라이브러리로 사용합니다.

### 3.3 백엔드 및 인증
- **Supabase**: 
  - 인증(Auth) 관리
  - 데이터베이스(PostgreSQL)
  - 실시간 기능(필요 시)
  - 스토리지(필요 시)

### 3.4 AI 통합
- **AI SDK**: AI 모델 연동을 위해 사용합니다.
- **@ai-sdk/react**: React 컴포넌트에서 AI 기능을 사용합니다.

### 3.5 코드 품질
- **ESLint**: Next.js 및 TypeScript 규칙을 기반으로 설정합니다.
- 모든 코드는 ESLint 규칙을 준수해야 합니다.

## 4. 코딩 스타일

### 4.1 컴포넌트 작성 규칙
- **함수형 컴포넌트**: 클래스 컴포넌트 대신 함수형 컴포넌트를 기본으로 사용합니다.
- **화살표 함수**: 모든 함수는 화살표 함수로 작성합니다.
  ```typescript
  // ✅ 올바른 예시
  const TodoList = () => {
    return <div>...</div>;
  };
  
  // ❌ 피해야 할 예시
  function TodoList() {
    return <div>...</div>;
  }
  ```

### 4.2 파일 명명 규칙
- **컴포넌트 파일**: 파스칼 케이스로 작성합니다.
  - 예: `TodoList.tsx`, `UserProfile.tsx`, `TaskCard.tsx`
- **유틸리티 파일**: 케이블 케이스로 작성합니다.
  - 예: `format-date.ts`, `api-client.ts`
- **훅 파일**: `use-` 접두사를 사용하고 케이블 케이스로 작성합니다.
  - 예: `use-todo.ts`, `use-auth.ts`

### 4.3 주석 및 문서화
- **한글 주석 필수**: 모든 함수와 컴포넌트 상단에 한 문장 개요를 한글로 작성합니다.
- **JSDoc 한글 작성**: JSDoc 주석도 한글로 기술합니다.
  
  ```typescript
  /**
   * 할 일 목록을 표시하는 컴포넌트입니다.
   * 
   * @param {Object} props - 컴포넌트 props
   * @param {Todo[]} props.todos - 표시할 할 일 목록
   * @param {(id: string) => void} props.onToggle - 할 일 완료 상태를 토글하는 함수
   * @returns {JSX.Element} 할 일 목록 UI
   */
  const TodoList = ({ todos, onToggle }: TodoListProps) => {
    // 컴포넌트 구현
  };
  ```

### 4.4 TypeScript 사용 규칙
- **타입 명시**: 모든 함수의 매개변수와 반환값에 타입을 명시합니다.
- **인터페이스/타입 정의**: 복잡한 객체는 인터페이스나 타입으로 정의합니다.
- **strict 모드 권장**: `tsconfig.json`에서 `strict: true`를 설정합니다.

### 4.5 ESLint 규칙 준수
- 모든 코드는 ESLint 규칙을 준수해야 합니다.
- 빌드 전에 `npm run lint`를 실행하여 오류를 확인합니다.

## 5. 컴포넌트 구조

### 5.1 컴포넌트 파일 구조
```typescript
// 1. Import 문
import { useState } from 'react';
import { Button } from '@/components/ui/button';

// 2. 타입/인터페이스 정의
interface ComponentProps {
  // ...
}

// 3. 컴포넌트 정의
/**
 * 컴포넌트 한 줄 설명
 */
const Component = ({ prop1, prop2 }: ComponentProps) => {
  // 4. Hooks
  const [state, setState] = useState();
  
  // 5. 이벤트 핸들러
  const handleClick = () => {
    // ...
  };
  
  // 6. 렌더링
  return (
    <div>
      {/* JSX */}
    </div>
  );
};

// 7. Export
export default Component;
```

## 6. 상태 관리

### 6.1 로컬 상태
- 간단한 상태는 `useState`를 사용합니다.
- 복잡한 상태는 `useReducer`를 고려합니다.

### 6.2 서버 상태
- Server Components를 적극 활용합니다.
- 클라이언트에서 필요한 경우 React Query나 SWR을 고려합니다.

## 7. API 및 데이터 페칭

### 7.1 Server Actions
- 데이터 변경 작업은 Server Actions를 사용합니다.
- 모든 Server Action은 오류 처리를 포함해야 합니다.

### 7.2 API Routes
- 외부 API 연동이 필요한 경우 API Routes를 사용합니다.
- 모든 API Route는 적절한 HTTP 상태 코드를 반환해야 합니다.

## 8. 스타일링 규칙

### 8.1 Tailwind CSS
- 인라인 스타일 대신 Tailwind 유틸리티 클래스를 사용합니다.
- 반복되는 스타일은 컴포넌트로 추출합니다.

### 8.2 Shadcn/ui
- 기존 UI 컴포넌트를 재사용합니다.
- 새로운 컴포넌트가 필요하면 Shadcn/ui 패턴을 따릅니다.

## 9. 테스트 (향후 추가 예정)
- 단위 테스트: 컴포넌트 및 유틸리티 함수
- 통합 테스트: 주요 사용자 플로우
- E2E 테스트: 핵심 기능

## 10. 성능 최적화

### 10.1 이미지 최적화
- Next.js Image 컴포넌트를 사용합니다.

### 10.2 코드 스플리팅
- 동적 import를 활용하여 코드 스플리팅을 구현합니다.

### 10.3 메모이제이션
- 불필요한 리렌더링을 방지하기 위해 `useMemo`, `useCallback`을 적절히 사용합니다.

## 11. 접근성 (A11y)
- 시맨틱 HTML을 사용합니다.
- 키보드 네비게이션을 지원합니다.
- ARIA 속성을 적절히 사용합니다.

## 12. Git 커밋 규칙
- 커밋 메시지는 한글로 작성 가능하지만, 영어로 작성하는 것을 권장합니다.
- 커밋 메시지 형식: `type: description`
  - 예: `feat: 할 일 추가 기능 구현`
  - 예: `fix: 로딩 상태 표시 오류 수정`

## 13. 코드 리뷰 체크리스트
- [ ] ESLint 오류가 없습니다.
- [ ] TypeScript 타입 오류가 없습니다.
- [ ] 한글 주석이 적절히 작성되었습니다.
- [ ] 오류 처리가 구현되었습니다.
- [ ] 로딩/빈 상태/오류 상태 UI가 제공됩니다.
- [ ] 사용자에게 한글로 친절한 메시지가 표시됩니다.
